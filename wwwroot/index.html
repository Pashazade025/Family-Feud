<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Feud - The Game</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Language Selector -->
    <div class="language-selector">
        <button class="lang-btn active" data-lang="en">🇬🇧 EN</button>
        <button class="lang-btn" data-lang="pl">🇵🇱 PL</button>
    </div>

    <!-- Main Container -->
    <div class="app-container">
        
        <!-- ========================================
             AUTH SECTION
             ======================================== -->
        <section id="auth-section" class="section active">
            <div class="auth-container">
                <div class="logo-container">
                    <h1 class="game-logo">FAMILY</h1>
                    <h1 class="game-logo feud">FEUD</h1>
                    <div class="logo-stars">★ ★ ★ ★ ★</div>
                </div>
                
                <!-- Login Form -->
                <div id="login-form" class="auth-form active">
                    <h2 class="form-title" data-i18n="login">Login</h2>
                    <div class="input-group">
                        <label for="login-email" data-i18n="email">Email</label>
                        <input type="email" id="login-email" placeholder="your@email.com">
                        <span class="input-icon">📧</span>
                    </div>
                    <div class="input-group">
                        <label for="login-password" data-i18n="password">Password</label>
                        <input type="password" id="login-password" placeholder="••••••••">
                        <span class="input-icon">🔒</span>
                    </div>
                    <button class="btn btn-primary" id="login-btn" data-i18n="loginBtn">
                        <span>Sign In</span>
                        <span class="btn-arrow">→</span>
                    </button>
                    <p class="auth-switch">
                        <span data-i18n="noAccount">Don't have an account?</span>
                        <a href="#" id="show-register" data-i18n="signUp">Sign Up</a>
                    </p>
                </div>
                
                <!-- Register Form -->
                <div id="register-form" class="auth-form">
                    <h2 class="form-title" data-i18n="register">Register</h2>
                    <div class="input-group">
                        <label for="register-username" data-i18n="username">Username</label>
                        <input type="text" id="register-username" placeholder="JohnDoe">
                        <span class="input-icon">👤</span>
                    </div>
                    <div class="input-group">
                        <label for="register-email" data-i18n="email">Email</label>
                        <input type="email" id="register-email" placeholder="your@email.com">
                        <span class="input-icon">📧</span>
                    </div>
                    <div class="input-group">
                        <label for="register-password" data-i18n="password">Password</label>
                        <input type="password" id="register-password" placeholder="••••••••">
                        <span class="input-icon">🔒</span>
                    </div>
                    <div class="input-group">
                        <label for="register-confirm" data-i18n="confirmPassword">Confirm Password</label>
                        <input type="password" id="register-confirm" placeholder="••••••••">
                        <span class="input-icon">🔒</span>
                    </div>
                    <button class="btn btn-primary" id="register-btn" data-i18n="registerBtn">
                        <span>Create Account</span>
                        <span class="btn-arrow">→</span>
                    </button>
                    <p class="auth-switch">
                        <span data-i18n="haveAccount">Already have an account?</span>
                        <a href="#" id="show-login" data-i18n="signIn">Sign In</a>
                    </p>
                </div>
                
                <div id="auth-message" class="message hidden"></div>
            </div>
        </section>
        
        <!-- ========================================
             DASHBOARD SECTION
             ======================================== -->
        <section id="dashboard-section" class="section">
            <header class="dashboard-header">
                <div class="user-info">
                    <span class="welcome-text" data-i18n="welcome">Welcome,</span>
                    <span class="username" id="display-username">Player</span>
                    <span class="user-role-badge" id="display-role"></span>
                </div>
                <nav class="nav-buttons">
                    <button class="nav-btn" id="admin-btn" style="display: none;">
                        ⚙️ <span data-i18n="admin">Admin</span>
                    </button>
                    <button class="nav-btn" id="logout-btn">
                        🚪 <span data-i18n="logout">Logout</span>
                    </button>
                </nav>
            </header>
            
            <div class="dashboard-content">
                <div class="game-title-display">
                    <h1 class="title-main">FAMILY</h1>
                    <h1 class="title-sub">FEUD</h1>
                </div>
                
                <div class="menu-grid">
                    <div class="menu-card" id="play-game-card">
                        <div class="card-icon">🎮</div>
                        <h3 data-i18n="playGame">Play Game</h3>
                        <p data-i18n="playDesc">Start a new game session</p>
                    </div>
                    <div class="menu-card" id="rules-card">
                        <div class="card-icon">📖</div>
                        <h3 data-i18n="rules">How to Play</h3>
                        <p data-i18n="rulesDesc">Learn the rules</p>
                    </div>
                    <div class="menu-card" id="admin-panel-card" style="display: none;">
                        <div class="card-icon">⚙️</div>
                        <h3 data-i18n="adminPanel">Admin Panel</h3>
                        <p data-i18n="adminDesc">Manage users, questions & settings</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- ========================================
             GAME SECTION
             ======================================== -->
        <section id="game-section" class="section">
            <div class="game-container">
                <div class="game-header">
                    <button class="back-btn" id="back-to-dashboard">← <span data-i18n="back">Back</span></button>
                    <div class="game-stats-bar">
                        <div class="stat-box">
                            <span class="stat-label">Q:</span>
                            <span id="question-number" class="stat-value">1</span>
                        </div>
                        <div class="stat-box score-box">
                            <span class="stat-label" data-i18n="score">Score:</span>
                            <span id="current-score" class="stat-value">0</span>
                        </div>
                        <div class="stat-box timer-box">
                            <span class="stat-label">⏱️</span>
                            <span id="timer-value" class="stat-value timer-value">45</span>
                        </div>
                        <div class="stat-box strikes-box">
                            <span id="strikes-container">
                                <span class="strike">✕</span>
                                <span class="strike">✕</span>
                                <span class="strike">✕</span>
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="question-board">
                    <div class="question-display">
                        <h2 id="current-question" data-i18n="loadingQuestion">Loading question...</h2>
                    </div>
                </div>
                
                <div class="answers-board" id="answers-board"></div>
                
                <div class="answer-input-container">
                    <input type="text" id="answer-input" placeholder="Type your answer..." data-i18n-placeholder="typeAnswer">
                    <button class="btn btn-submit" id="submit-answer" data-i18n="submit">Submit</button>
                </div>
                
                <div class="game-controls">
                    <button class="btn btn-secondary" id="next-question" data-i18n="nextQuestion" style="display: none;">
                        Next Question →
                    </button>
                    <button class="btn btn-danger" id="end-game" data-i18n="endGame">
                        End Game
                    </button>
                </div>
            </div>
        </section>
        
        <!-- ========================================
             ADMIN SECTION
             ======================================== -->
        <section id="admin-section" class="section">
            <div class="admin-container">
                <header class="admin-header">
                    <h1>⚙️ <span data-i18n="adminPanel">Admin Panel</span></h1>
                    <button class="back-btn" id="admin-back">← <span data-i18n="back">Back</span></button>
                </header>
                
                <!-- Admin Tabs -->
                <div class="admin-tabs">
                    <button class="tab-btn active" data-tab="dashboard">📊 Dashboard</button>
                    <button class="tab-btn" data-tab="users">👥 <span data-i18n="users">Users</span></button>
                    <button class="tab-btn" data-tab="questions">❓ <span data-i18n="questions">Questions</span></button>
                    <button class="tab-btn" data-tab="apikeys">🔑 API Keys</button>
                    <button class="tab-btn" data-tab="settings">⚙️ Settings</button>
                </div>
                
                <div class="admin-content">
                    
                    <!-- Dashboard Tab -->
                    <div class="tab-content active" id="dashboard-tab">
                        <h2 class="tab-title">📊 Dashboard Overview</h2>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">👥</div>
                                <div class="stat-number" id="total-users">0</div>
                                <div class="stat-label" data-i18n="totalUsers">Total Users</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">🎮</div>
                                <div class="stat-number" id="total-games">0</div>
                                <div class="stat-label" data-i18n="totalGames">Total Games</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">❓</div>
                                <div class="stat-number" id="total-questions">0</div>
                                <div class="stat-label" data-i18n="totalQuestions">Total Questions</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">🔑</div>
                                <div class="stat-number" id="total-apikeys">0</div>
                                <div class="stat-label">Active API Keys</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">▶️</div>
                                <div class="stat-number" id="active-games">0</div>
                                <div class="stat-label">Active Games</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">✅</div>
                                <div class="stat-number" id="completed-games">0</div>
                                <div class="stat-label">Completed Games</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Users Tab -->
                    <div class="tab-content" id="users-tab">
                        <h2 class="tab-title">👥 User Management</h2>
                        <div class="table-container">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Username</th>
                                        <th>Email</th>
                                        <th>Role</th>
                                        <th>Language</th>
                                        <th data-i18n="created">Created</th>
                                        <th data-i18n="actions">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="users-list"></tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Questions Tab -->
                    <div class="tab-content" id="questions-tab">
                        <div class="tab-header">
                            <h2 class="tab-title">❓ Question Management</h2>
                            <button class="btn btn-primary" id="add-question-btn">
                                + <span data-i18n="addQuestion">Add Question</span>
                            </button>
                        </div>
                        <div class="table-container">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Question (EN)</th>
                                        <th data-i18n="category">Category</th>
                                        <th data-i18n="difficulty">Difficulty</th>
                                        <th data-i18n="answers">Answers</th>
                                        <th data-i18n="status">Status</th>
                                        <th data-i18n="actions">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="questions-list"></tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- API Keys Tab -->
                    <div class="tab-content" id="apikeys-tab">
                        <div class="tab-header">
                            <h2 class="tab-title">🔑 API Key Management</h2>
                            <button class="btn btn-primary" id="generate-apikey-btn">
                                + Generate New API Key
                            </button>
                        </div>
                        <div class="api-info-box">
                            <h4>📚 API Documentation</h4>
                            <p>External developers can access our public API using API keys.</p>
                            <p><strong>Base URL:</strong> <code id="api-base-url">https://localhost:7055/api</code></p>
                            <p><strong>Rate Limit:</strong> 100 requests per hour</p>
                            <p><strong>Authentication:</strong> Include header <code>X-API-Key: your_api_key</code></p>
                        </div>
                        <div class="table-container">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th data-i18n="developer">Developer</th>
                                        <th>Email</th>
                                        <th data-i18n="keyPreview">Key Preview</th>
                                        <th data-i18n="status">Status</th>
                                        <th data-i18n="created">Created</th>
                                        <th data-i18n="actions">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="apikeys-list"></tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Settings Tab -->
                    <div class="tab-content" id="settings-tab">
                        <h2 class="tab-title">⚙️ Game Settings</h2>
                        <div class="settings-form">
                            <div class="setting-group">
                                <label>⏱️ <span data-i18n="timerDuration">Timer Duration</span> (seconds)</label>
                                <p class="setting-description">Time limit for each question</p>
                                <div class="setting-options">
                                    <button class="setting-btn" data-setting="timer" data-value="30">30s</button>
                                    <button class="setting-btn active" data-setting="timer" data-value="45">45s</button>
                                    <button class="setting-btn" data-setting="timer" data-value="60">60s</button>
                                    <button class="setting-btn" data-setting="timer" data-value="90">90s</button>
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <label>❌ <span data-i18n="maxStrikes">Max Strikes</span></label>
                                <p class="setting-description">Wrong answers allowed before round ends</p>
                                <div class="setting-options">
                                    <button class="setting-btn" data-setting="strikes" data-value="2">2</button>
                                    <button class="setting-btn active" data-setting="strikes" data-value="3">3</button>
                                    <button class="setting-btn" data-setting="strikes" data-value="4">4</button>
                                    <button class="setting-btn" data-setting="strikes" data-value="5">5</button>
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <label>🎯 <span data-i18n="questionsPerGameLabel">Questions per Game</span></label>
                                <p class="setting-description">Number of questions in one game session</p>
                                <div class="setting-options">
                                    <button class="setting-btn" data-setting="questions" data-value="5">5</button>
                                    <button class="setting-btn active" data-setting="questions" data-value="10">10</button>
                                    <button class="setting-btn" data-setting="questions" data-value="15">15</button>
                                    <button class="setting-btn" data-setting="questions" data-value="0" data-i18n="unlimited">Unlimited</button>
                                </div>
                            </div>
                            
                            <div class="setting-group">
                                <label>💰 <span data-i18n="timeBonusMultiplier">Time Bonus Multiplier</span></label>
                                <p class="setting-description">Points per remaining second when all answers found</p>
                                <div class="setting-options">
                                    <button class="setting-btn" data-setting="bonus" data-value="1">1x</button>
                                    <button class="setting-btn active" data-setting="bonus" data-value="2">2x</button>
                                    <button class="setting-btn" data-setting="bonus" data-value="3">3x</button>
                                    <button class="setting-btn" data-setting="bonus" data-value="5">5x</button>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary btn-save" id="save-settings-btn">
                                💾 Save Settings
                            </button>
                        </div>
                    </div>
                    
                </div>
            </div>
        </section>
        
    </div>
    
    <!-- ========================================
         MODALS
         ======================================== -->
    
    <!-- Rules Modal -->
    <div class="modal" id="rules-modal">
        <div class="modal-content">
            <button class="modal-close" id="close-rules">×</button>
            <h2 class="modal-title">📖 <span data-i18n="rules">How to Play</span></h2>
            <div class="rules-content">
                <div class="rule-item">
                    <span class="rule-number">1</span>
                    <p>A survey question will be displayed with hidden answers.</p>
                </div>
                <div class="rule-item">
                    <span class="rule-number">2</span>
                    <p>You have <strong>45 seconds</strong> for each question!</p>
                </div>
                <div class="rule-item">
                    <span class="rule-number">3</span>
                    <p>Type your answer and submit to reveal matching answers.</p>
                </div>
                <div class="rule-item">
                    <span class="rule-number">4</span>
                    <p>Each correct answer awards points based on popularity.</p>
                </div>
                <div class="rule-item">
                    <span class="rule-number">5</span>
                    <p>Three wrong answers (strikes) end the current round.</p>
                </div>
                <div class="rule-item">
                    <span class="rule-number">6</span>
                    <p>Find all answers quickly for <strong>Time Bonus</strong> points!</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Question Modal -->
    <div class="modal" id="add-question-modal">
        <div class="modal-content modal-large">
            <button class="modal-close" id="close-add-question">×</button>
            <h2 class="modal-title">➕ Add New Question</h2>
            <form id="question-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>Question (English) *</label>
                        <input type="text" id="question-text-en" required placeholder="Enter question in English...">
                    </div>
                    <div class="form-group">
                        <label>Question (Polish) *</label>
                        <input type="text" id="question-text-pl" required placeholder="Wpisz pytanie po polsku...">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Category</label>
                        <select id="question-category">
                            <option value="General">General</option>
                            <option value="Food">Food</option>
                            <option value="Sports">Sports</option>
                            <option value="Entertainment">Entertainment</option>
                            <option value="Technology">Technology</option>
                            <option value="Daily Life">Daily Life</option>
                            <option value="Work">Work</option>
                            <option value="Social">Social</option>
                            <option value="Travel">Travel</option>
                            <option value="Animals">Animals</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Difficulty</label>
                        <select id="question-difficulty">
                            <option value="1">Easy (1)</option>
                            <option value="2">Medium (2)</option>
                            <option value="3">Hard (3)</option>
                        </select>
                    </div>
                </div>
                <div class="answers-section">
                    <h4>Answers (minimum 3, maximum 8)</h4>
                    <p class="section-hint">Higher ranked answers should have more points</p>
                    <div id="answers-inputs"></div>
                    <button type="button" class="btn btn-secondary btn-small" id="add-answer-field">
                        + Add Answer
                    </button>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-question">Cancel</button>
                    <button type="submit" class="btn btn-primary">💾 Save Question</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Generate API Key Modal -->
    <div class="modal" id="apikey-modal">
        <div class="modal-content">
            <button class="modal-close" id="close-apikey-modal">×</button>
            <h2 class="modal-title">🔑 Generate API Key</h2>
            <form id="apikey-form">
                <div class="form-group">
                    <label>Developer Name *</label>
                    <input type="text" id="developer-name" required placeholder="John Doe">
                </div>
                <div class="form-group">
                    <label>Developer Email *</label>
                    <input type="email" id="developer-email" required placeholder="developer@example.com">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-apikey">Cancel</button>
                    <button type="submit" class="btn btn-primary">🔑 Generate Key</button>
                </div>
            </form>
            <div id="apikey-result" class="apikey-result hidden">
                <h4>✅ API Key Generated Successfully!</h4>
                <p class="warning">⚠️ Copy this key now! You won't be able to see it again.</p>
                <div class="apikey-display">
                    <code id="generated-apikey"></code>
                    <button type="button" class="btn btn-small" id="copy-apikey">📋 Copy</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Game Over Modal -->
    <div class="modal" id="game-over-modal">
        <div class="modal-content">
            <h2 class="modal-title game-over-title">🎉 <span data-i18n="gameOver">Game Over!</span></h2>
            <div class="final-score">
                <span data-i18n="finalScore">Final Score:</span>
                <span id="final-score-value" class="score-big">0</span>
            </div>
            <div class="game-stats-summary">
                <div class="stat-row">
                    <span class="stat-label" data-i18n="questionsPlayed">Questions Played:</span>
                    <span id="questions-played" class="stat-value">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label" data-i18n="correctAnswers">Correct Answers:</span>
                    <span id="correct-answers" class="stat-value">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label" data-i18n="timeBonus">Time Bonus:</span>
                    <span id="time-bonus" class="stat-value">0</span>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" id="play-again" data-i18n="playAgain">Play Again</button>
                <button class="btn btn-secondary" id="go-dashboard" data-i18n="backToDashboard">Back to Dashboard</button>
            </div>
        </div>
    </div>
    
    <!-- ========================================
         OVERLAYS
         ======================================== -->
    
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loader">
            <div class="loader-spinner"></div>
            <p data-i18n="loading">Loading...</p>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-icon"></span>
        <span class="toast-message"></span>
    </div>

    <script src="app.js"></script>
</body>
</html>